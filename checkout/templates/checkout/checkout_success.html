{% extends 'base.html' %}
{% load static %}

{% block extra_meta %}
<meta name="description" content="Checkout has been successful">
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block extra_title %} | Checkout success{% endblock %}

{% block page_header%}
    <header>
        <div class="container-fluid d-flex justify-content-center">
        
            <div class="row">
                <div class="col">
                    <h1>Payment successful</h1>
                    <p>Thank you for your order.</p>
                    <p>A confirmation will be sent to {{ order.email }}.</p>
                </div>
            </div>
        </div>
        
    </header>
{% endblock %}




{% block content %}
<main>
    <div class="container-fluid d-flex justify-content-center">
        <div class="row">
            <div class="col">
            
            <header class="ms-auto">
                <h2>Order details</h2>
                <!--too large order nr messes up responsiveness-->
                <p>Order number: <span title="{{ order.order_number }}">{{ order.order_number|truncatechars:6 }}</span>.</p>
            </header>
            
            
            
            <section class="mb-2">
                
                
                <!--iterate through order items-->

                {% for item in order.lineitems.all %} 
                <article>           
                <div class="card mb-3" style="max-width: 600px;">
                    <div class="row g-0">
                        
                        <div class="col">
                            <div class="card-body">

                                <h3 class="h5 card-title">{{ item.lesson.date_time }} - {{ item.lesson.duration }} - {{ item.lesson.name }}</h3>
                                <p class="card-text"><small class="text-body-secondary">Place: {{ item.lesson.place }}</small></p>
                                <p class="card-text">{{ item.quantity }} x $ {{ item.lesson.price | floatformat }}</p>
                                <p class="card-text">Places currently left: {{ item.lesson.places_left }}</p>
                                

                            </div>
                        </div>
                        
                    </div>
                        
                </div>
                </article>
                {% endfor %}

            

                <p>Grand total: $ {{ order.grand_total }}</p>

                {% if from_profile %}
                    <a href="{% url 'profile' %}" class="btn login-button">
                        <span class="icon mr-2">
                            <i class="fas fa-angle-left"></i>
                        </span>
                        Back to profile
                    </a>
                {% endif %}



                    
                
            </section>
            
            </div>
        </div>
    </div>
        



</main>
{% endblock %}


